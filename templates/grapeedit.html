{% extends 'grapes.html' %}
{% block content %} 

<link rel="stylesheet" href="{{ url_for('static', filename='css/grapes.min.css') }}">

    

    <style>
      body,
      html {
        height: 100%;
        margin: 0;
      }
    </style>
    <div id="gjs" style="height:0px; overflow:hidden;">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.5.0-rc.3/dist/css/foundation.min.css" integrity="sha256-b2khkeAav/7kTh0Bs5h1Xw1kqGL56SziJ5zk6bEvnAw= sha384-7nP0F9FVCI9Qg1SfsjHWQd+4ksCAxlF5pibRyPGxwn7NJpu1XuSaOoMh8JHIDSdk sha512-Rcgo7Zj9clxZoGtt4CBj1aEtCL9gBd64nYl3hkKEuWDwtK7hKY6c4D5vL4njDseuz31u1WWSM42SbvYe/3CZYQ==" crossorigin="anonymous">

    <style type="text/css">
      .grid-x{
        padding: 10px;
      }
      .cell{padding:10px;}
      select{padding: 0;
    height: 20px;
margin: 0;}
    </style>
      
    </div>

    <script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/grapes.min.js') }}"></script>


    <script type="text/javascript">

    function foundationPlugin(editor,option){
      console.log(option);
      editor.BlockManager.add('1-column', {
        category: 'Basic',
        label: '1 Column',
        attributes: {class:'gjs-fonts gjs-f-b1'},
        content: '<div class="grid-x"><div class="cell"></div></div>',
      });

      editor.BlockManager.add('2-column', {
        category: 'Basic',
        attributes: {class:'gjs-fonts gjs-f-b2'},
        label: '2 columns',
        content: '<div class="grid-x"><div class="cell medium-6"></div><div class="cell medium-6"></div></div>',
      });

      editor.BlockManager.add('3-column', {
        category: 'Basic',
        attributes: {class:'gjs-fonts gjs-f-b3'},
        label: '3 columns',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-4"></div><div class="cell medium-4"></div></div>',
      });

      editor.BlockManager.add('4-column', {
        category: 'Basic',
        attributes: {class:'gjs-fonts gjs-f-b4'},
        label: '<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path></svg><div class="gjs-block-label">4 columns</div>',
        content: '<div class="grid-x"><div class="cell medium-3"></div><div class="cell medium-3"></div><div class="cell medium-3"></div><div class="cell medium-3"></div></div>',
      });

      editor.BlockManager.add('4-8-column', {
        category: 'Basic',
        attributes: {class:'gjs-fonts gjs-f-b37'},
        label: '4-8 columns',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });
      editor.BlockManager.add('dropdown', {
        category: 'Navigation',

        label: '<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path><rect class="gjs-block-svg-path" x="15" y="10" width="5" height="1"></rect><rect class="gjs-block-svg-path" x="15" y="13" width="5" height="1"></rect><rect class="gjs-block-svg-path" x="15" y="11.5" width="5" height="1"></rect></svg><div class="gjs-block-label">Dropdown</div>',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });

      editor.BlockManager.add('off-canvas', {
        category: 'Navigation',

        label: '<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path><rect class="gjs-block-svg-path" x="15" y="10" width="5" height="1"></rect><rect class="gjs-block-svg-path" x="15" y="13" width="5" height="1"></rect><rect class="gjs-block-svg-path" x="15" y="11.5" width="5" height="1"></rect></svg><div class="gjs-block-label">Off Canvas</div>',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });

      editor.BlockManager.add('banner', {
        category: 'Media',

        label: 'Slider',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });

      editor.BlockManager.add('footer', {
        category: 'Containers',

        label: 'Footer',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });

      editor.BlockManager.add('header', {
        category: 'Containers',

        label: 'Header',
        content: '<div class="grid-x"><div class="cell medium-4"></div><div class="cell medium-8"></div></div>',
      });





  }


      var editor = grapesjs.init({
        showOffsets: 1,
        noticeOnUnload: 0,
        container: '#gjs',
        height: '100%',
        fromElement: true,
          storageManager: {
          type: 'remote',
          autoload:true,
          stepsBeforeSave: 3,
          urlStore: '/theme/store?id=8',
          urlLoad: '/theme/load?id=8',
          storeComponents: true,  // Enable/Disable storing of components in JSON format
	      storeStyles: true,      // Enable/Disable storing of rules in JSON format
	      storeHtml: true,        // Enable/Disable storing of components as HTML string
	      storeCss: true         // Enable/Disable storing of rules as CSS string
        },
        plugins: ['foundationPlugin'],
        pluginsOpts: {
          ['foundationPlugin']: {
            customField: 'customValue'
          }
        },
        styleManager : {
          sectors: [{
              name: 'General',
              open: false,
              buildProps: ['float', 'display', 'position', 'top', 'right', 'left', 'bottom']
            },{
              name: 'Dimension',
              open: false,
              buildProps: ['width', 'height', 'max-width', 'min-height', 'margin', 'padding'],
            },{
              name: 'Typography',
              open: false,
              buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-shadow'],
            },{
              name: 'Decorations',
              open: false,
              buildProps: ['border-radius-c', 'background-color', 'border-radius', 'border', 'box-shadow', 'background'],
            },{
              name: 'Extra',
              open: false,
              buildProps: ['transition', 'perspective', 'transform'],
            }
          ],
        },
      });
const panelManager = editor.Panels;

var newPanel = panelManager.addPanel({
  id: 'exportPanel',
 visible  : true,
 buttons  : [{
  id: 'myNewButton',
  className: 'fa fa-upload',
  command: {
    run: function(editor) {
      editor.store(res => console.log('Store callback'));
    },
    stop: function(editor) {

    }
  },
  attributes: { title: 'Some title'},
  active: false,
}],
});

      
    </script>
{% endblock %}
